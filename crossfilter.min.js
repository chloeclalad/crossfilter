(function(e){function t(e){return e}function n(e,t){for(var n=0,r=t.length,i=new Array(r);n<r;++n)i[n]=e[t[n]];return i}function i(e){function t(t,n,r,i){while(r<i){var s=r+i>>1;e(t[s])<n?r=s+1:i=s}return r}function n(t,n,r,i){while(r<i){var s=r+i>>1;n<e(t[s])?i=s:r=s+1}return r}return n.right=n,n.left=t,n}function o(e){function t(e,t,n){var i=n-t,s=(i>>>1)+1;while(--s>0)r(e,s,i,t);return e}function n(e,t,n){var i=n-t,s;while(--i>0)s=e[t],e[t]=e[t+i],e[t+i]=s,r(e,1,i,t);return e}function r(t,n,r,i){var s=t[--i+n],o=e(s),u;while((u=n<<1)<=r){u<r&&e(t[i+u])>e(t[i+u+1])&&u++;if(o<=e(t[i+u]))break;t[i+n]=t[i+u],n=u}t[i+n]=s}return t.sort=n,t}function a(e){function n(n,r,i,s){var o=new Array(s=Math.min(i-r,s)),u,a,f,l;for(a=0;a<s;++a)o[a]=n[r++];t(o,0,s);if(r<i){u=e(o[0]);do if(f=e(l=n[r])>u)o[0]=l,u=e(t(o,0,s)[0]);while(++r<i)}return o}var t=o(e);return n}function c(e){function t(t,n,r){for(var i=n+1;i<r;++i){for(var s=i,o=t[i],u=e(o);s>n&&e(t[s-1])>u;--s)t[s]=t[s-1];t[s]=o}return t}return t}function p(e){function n(e,n,i){return(i-n<d?t:r)(e,n,i)}function r(t,r,i){var s=(i-r)/6|0,o=r+s,u=i-1-s,a=r+i-1>>1,f=a-s,l=a+s,c=t[o],h=e(c),p=t[f],d=e(p),v=t[a],m=e(v),g=t[l],y=e(g),b=t[u],w=e(b),E;h>d&&(E=c,c=p,p=E,E=h,h=d,d=E),y>w&&(E=g,g=b,b=E,E=y,y=w,w=E),h>m&&(E=c,c=v,v=E,E=h,h=m,m=E),d>m&&(E=p,p=v,v=E,E=d,d=m,m=E),h>y&&(E=c,c=g,g=E,E=h,h=y,y=E),m>y&&(E=v,v=g,g=E,E=m,m=y,y=E),d>w&&(E=p,p=b,b=E,E=d,d=w,w=E),d>m&&(E=p,p=v,v=E,E=d,d=m,m=E),y>w&&(E=g,g=b,b=E,E=y,y=w,w=E);var S=p,x=d,T=g,N=y;t[o]=c,t[f]=t[r],t[a]=v,t[l]=t[i-1],t[u]=b;var C=r+1,k=i-2,L=x<=N&&x>=N;if(L)for(var A=C;A<=k;++A){var O=t[A],M=e(O);if(M<x)A!==C&&(t[A]=t[C],t[C]=O),++C;else if(M>x)for(;;){var _=e(t[k]);if(_>x){k--;continue}if(_<x){t[A]=t[C],t[C++]=t[k],t[k--]=O;break}t[A]=t[k],t[k--]=O;break}}else for(var A=C;A<=k;A++){var O=t[A],M=e(O);if(M<x)A!==C&&(t[A]=t[C],t[C]=O),++C;else if(M>N)for(;;){var _=e(t[k]);if(_>N){k--;if(k<A)break;continue}_<x?(t[A]=t[C],t[C++]=t[k],t[k--]=O):(t[A]=t[k],t[k--]=O);break}}t[r]=t[C-1],t[C-1]=S,t[i-1]=t[k+1],t[k+1]=T,n(t,r,C-1),n(t,k+2,i);if(L)return t;if(C<o&&k>u){var D,_;while((D=e(t[C]))<=x&&D>=x)++C;while((_=e(t[k]))<=N&&_>=N)--k;for(var A=C;A<=k;A++){var O=t[A],M=e(O);if(M<=x&&M>=x)A!==C&&(t[A]=t[C],t[C]=O),C++;else if(M<=N&&M>=N)for(;;){var _=e(t[k]);if(_<=N&&_>=N){k--;if(k<A)break;continue}_<x?(t[A]=t[C],t[C++]=t[k],t[k--]=O):(t[A]=t[k],t[k--]=O);break}}}return n(t,C,k+1)}var t=c(e);return n}function w(e){return new Array(e)}function E(e,t){return function(n){var r=n.length;return[[e.left(n,t,0,r),e.right(n,t,0,r)]]}}function S(e,t){var n=t[0],r=t[1];return function(t){var i=t.length;return[[e.left(t,n,0,i),e.left(t,r,0,i)]]}}function x(e){return[[0,e.length]]}function T(e){var t=Array.prototype.slice.call(arguments,1);return function(n){var r=n.length,i=[];t.forEach(function(t){Array.isArray(t)?i.push(S(e,t)(n)[0]):t&&i.push(E(e,t)(n)[0])}),i.sort(function(e,t){return e[0]-t[0]});for(var s=0,o=i.length-1;s<o;++s)i[s][0]==i[s+1][0]&&i[s][1]==i[s+1][1]&&(i.splice(s,1),--o,--s);return i}}function N(){return null}function C(){return 0}function k(e){return e+1}function L(e){return e-1}function A(e){return function(t,n){return t+ +e(n)}}function O(e){return function(t,n){return t-e(n)}}function M(){function m(t){var n=s,r=t.length;return r&&(i=i.concat(t),c=y(c,s+=r),d.forEach(function(e){e(t,n,r)})),e}function g(e){function R(t,r,i){H=t.map(e),B=j(D(i),0,i),H=n(H,B),q=F(H);var o,u,a;for(a=0;a<i;++a)c[B[a]+r]|=m;q.forEach(function(e){o=e[0],u=e[1];for(a=o;a<u;++a)c[B[a]+r]&m&&(c[B[a]+r]^=m)});if(!r){w=H,M=B;return}var f=w,l=M,h=0,p=0;w=new Array(s),M=_(s,s);for(a=0;h<r&&p<i;++a)f[h]<H[p]?(w[a]=f[h],M[a]=l[h++]):(w[a]=H[p],M[a]=B[p++]+r);for(;h<r;++h,++a)w[a]=f[h],M[a]=l[h];for(;p<i;++p,++a)w[a]=H[p],M[a]=B[p]+r;q=F(w)}function U(e,t,n){I.forEach(function(e){e(H,B,t,n)}),H=B=null}function z(e){function w(e,t){return e[0]==t[0]&&e[1]==t[1]}function E(e,t){return t[0]>=e[0]&&t[1]<=e[1]}function S(e,t){return e[0]>=t[0]&&e[0]<=t[1]||e[1]>=t[0]&&e[1]<=t[1]}var t,n,r,i,s,o,u,a=[],f=[],p,d,g,y,b=new Array;e.forEach(function(e){b.push(e)});for(t=0,l1=e.length;t<l1;++t){d=e[t];for(n=0,l=q.length;n<l;++n){p=q[n];if(w(p,d))q.splice(n,1),e.splice(t,1),--t,n=q.length,l=q.length,l1=e.length;else if(E(p,d)){var g=[p[0],d[0]],y=[d[1],p[1]];q.splice(n,1,g,y),e.splice(t,1),l1=e.length,--t,n=q.length,l=q.length}else if(E(d,p)){q.splice(n,1);var g=[d[0],p[0]],y=[p[1],d[1]];e.splice(t,1,g,y),--t,n=q.length,l=q.length,l1=e.length}else if(S(d,p)){o=p[0],u=p[1],i=d[0],s=d[1];var g,y;o<i?(g=[o,i],q.splice(n,1,g),y=[u,s],e.splice(t,1,y),d=y):i<o&&(g=[i,o],e.splice(t,1,g),d=g,y=[s,u],q.splice(n,1,y))}}}return e.forEach(function(e){i=e[0],s=e[1];for(t=i,n=s;t<n;++t)c[r=M[t]]^=m,a.push(r)}),q.forEach(function(e){o=e[0],u=e[1];for(t=o,n=u;t<n;++t)c[r=M[t]]^=m,f.push(r)}),q=b,h.forEach(function(e){e(m,a,f)}),v}function W(e){return e==null?$():Array.isArray(e)&&arguments.length==1?V(e):arguments.length>1?J.apply(this,arguments):X(e)}function X(e){return z((F=E(r,e))(w))}function V(e){return z((F=S(r,e))(w))}function $(){return z((F=x)(w))}function J(){var e=Array.prototype.slice.call(arguments,0);return e.unshift(r),z((F=T.apply(this,e))(w))}function K(e){var t=[],n,r,s,o=q.length-1;r=q[o][1],n=q[o][0];while(--r>=n&&e>0&&o>=0)c[s=M[r]]||(t.push(i[s]),--e),r<n&&o>0&&(--o,r=q[o][1],n=q[o][0]);return t}function Q(e){function j(t,n,o,a){function I(){++p===l&&(v=b(v,f<<=1),u=b(u,f),l=P(f))}var d=r,v=_(p,l),m=E,w=x,S=p,T=0,C=0,k,L,A,O,M,j;B&&(m=w=N),r=new Array(p),p=0,u=S>1?y(u,s):_(s,l),S&&(A=(L=d[0]).key);while(C<a&&!((O=e(t[C]))>=O))++C;while(C<a){if(L&&A<=O){M=L,j=A,v[T]=p;if(L=d[++T])A=L.key}else M={key:O,value:w()},j=O;r[p]=M;while(!(O>j)){u[k=n[C]+o]=p,c[k]&g||(M.value=m(M.value,i[k]));if(++C>=a)break;O=e(t[C])}I()}while(T<S)r[v[T]=p]=d[T++],I();if(p>T)for(T=0;T<o;++T)u[T]=v[u[T]];k=h.indexOf(D),p>1?(D=F,H=R):(p===1?(D=q,H=U):(D=N,H=N),u=null),h[k]=D}function F(e,t,n){if(e===m||B)return;var s,o,a,f;for(s=0,a=t.length;s<a;++s)c[o=t[s]]&g||(f=r[u[o]],f.value=E(f.value,i[o]));for(s=0,a=n.length;s<a;++s)(c[o=n[s]]&g)===e&&(f=r[u[o]],f.value=S(f.value,i[o]))}function q(e,t,n){if(e===m||B)return;var s,o,u,a=r[0];for(s=0,u=t.length;s<u;++s)c[o=t[s]]&g||(a.value=E(a.value,i[o]));for(s=0,u=n.length;s<u;++s)(c[o=n[s]]&g)===e&&(a.value=S(a.value,i[o]))}function R(){var e,t;for(e=0;e<p;++e)r[e].value=x();for(e=0;e<s;++e)c[e]&g||(t=r[u[e]],t.value=E(t.value,i[e]))}function U(){var e,t=r[0];t.value=x();for(e=0;e<s;++e)c[e]&g||(t.value=E(t.value,i[e]))}function z(){return B&&(H(),B=!1),r}function W(e){var t=d(z(),0,r.length,e);return v.sort(t,0,t.length)}function X(e,t,r){return E=e.hasOwnProperty("add")?e.add:e,S=e.hasOwnProperty("remove")?e.remove:t,x=e.hasOwnProperty("initial")?e.initial:r,B=!0,n}function V(){return X(k,L,C)}function $(e){return X(A(e),O(e),C)}function J(e){function t(t){return e(t.value)}return d=a(t),v=o(t),n}function K(){return J(t)}function Q(){return p}var n={top:W,all:z,reduce:X,reduceCount:V,reduceSum:$,order:J,orderNatural:K,size:Q},r,u,f=8,l=P(f),p=0,d,v,E,S,x,T,D=N,H=N,B=!0;return arguments.length<1&&(e=t),h.push(D),I.push(j),j(w,M,0,s),V().orderNatural()}function G(){var e=Q(N),t=e.all;return delete e.all,delete e.top,delete e.order,delete e.orderNatural,delete e.size,e.value=function(){return t()[0].value},e}var v={filter:W,filterExact:X,filterRange:V,filterAll:$,top:K,group:Q,groupAll:G},m=1<<u++,g=~m,w,M,H,B,j=p(function(e){return H[e]}),F=x,I=[],q=[[0,0]];return d.unshift(R),d.push(U),u>f&&(c=b(c,f<<=1)),R(i,0,s),U(i,0,s),v}function w(){function f(e,r,o){var u;if(a)return;for(u=r;u<s;++u)c[u]||(t=n(t,i[u]))}function l(e,s,o){var u,f,l;if(a)return;for(u=0,l=s.length;u<l;++u)c[f=s[u]]||(t=n(t,i[f]));for(u=0,l=o.length;u<l;++u)c[f=o[u]]===e&&(t=r(t,i[f]))}function p(){var e;t=o();for(e=0;e<s;++e)c[e]||(t=n(t,i[e]))}function v(t,i,s){return n=t.hasOwnProperty("add")?t.add:t,r=t.hasOwnProperty("remove")?t.remove:i,o=t.hasOwnProperty("initial")?t.initial:s,a=!0,e}function m(){return v(k,L,C)}function g(e){return v(A(e),O(e),C)}function y(){return a&&(p(),a=!1),t}var e={reduce:v,reduceCount:m,reduceSum:g,value:y},t,n,r,o,u,a=!0;return h.push(l),d.push(f),f(i,0,s),m()}function M(){return s}var e={add:m,dimension:g,groupAll:w,size:M},i=[],s=0,u=0,f=8,c=v(0),h=[],d=[];return arguments.length?m(arguments[0]):e}function _(e,t){return(t<257?v:t<65537?m:g)(e)}function D(e){var t=_(e,e);for(var n=-1;++n<e;)t[n]=n;return t}function P(e){return e===8?256:e===16?65536:4294967296}function j(e){var t;return B.isArray(e)?B.map(e,j):B.has(e,"finalize")&&B.isFunction(e.finalize)?e.finalize():B.isObject(e)?(t={},B.each(B.keys(e),function(n){t[n]=B.has(e[n],"finalize")&&B.isFunction(e[n].finalize)?e[n].finalize():B.isObject(e[n])?j(e[n]):e[n]}),t):e}function F(e){return function(t,n){return t+ +e(n)}}function I(e){return function(t,n){return t-e(n)}}function q(e){return function(t,n){return t.count+=1,t.sum+=+e(n),t}}function R(e){return function(t,n){return t.count-=1,t.sum-=e(n),t}}function U(e){return function(t,n){var r=e(n);return r!==undefined&&r!==null&&t.candidates.splice(M.bisect.left(t.candidates,r,0,t.candidates.length),0,r),t}}function z(e){return function(t,n){var r=t.candidates.indexOf(e(n));return r>=0&&t.candidates.splice(r,1),t}}function W(){return{candidates:[],finalize:function(){var e,t;return this.candidates.length&&(e=this.candidates[0],t=this.candidates[this.candidates.length-1]),[e,t]}}}function X(e){return e+1}function V(e){return e-1}function $(){return 0}function J(e){var t=B.isFunction(e)?e:function(t){return t[e]};return{add:F(t),remove:I(t),initial:$}}function K(e){var t=B.isFunction(e)?e:function(t){return t[e]};return{add:q(t),remove:R(t),initial:function(){return{count:0,sum:0,finalize:function(){return this.count>0?this.sum/this.count:0}}}}}function Q(e){var t=B.isFunction(e)?e:function(t){return t[e]};return{add:U(t),remove:z(t),initial:W}}function G(e){return{add:X,remove:V,initial:$}}function Y(e,t){var n=function(){return function(){return init={},B.each(B.keys(e),function(t){init[t]=e[t].initial()}),t&&B.isFunction(t)&&(init.finalize=t),init}},r=function(){return function(t,n){return B.each(B.keys(e),function(r){t[r]=e[r].add(t[r],n)}),t}},i=function(){return function(t,n){return B.each(B.keys(e),function(r){t[r]=e[r].remove(t[r],n)}),t}};return{add:r(),remove:i(),initial:n()}}function Z(e,t,n){var r=B.isFunction(e)?e:function(t){return t[e]},i=function(){return function(){return init={},n&&B.isFunction(n)&&(init.finalize=n),init}},s=function(){return function(e,n){var i=r(n);return B.has(e,i)||(e[i]=t.initial()),e[i]=t.add(e[i],n),e}},o=function(){return function(e,n){var i=r(n);return B.has(e,i)||(e[i]=t.initial()),e[i]=t.remove(e[i],n),e}};return{add:s(),remove:o(),initial:i()}}M.version="1.0.3",M.permute=n;var r=M.bisect=i(t);r.by=i;var s=M.heap=o(t);s.by=o;var u=M.heapselect=a(t);u.by=a;var f=M.insertionsort=c(t);f.by=c;var h=M.quicksort=p(t);h.by=p;var d=32,v=w,m=w,g=w,y=t,b=t;typeof Uint8Array!="undefined"&&(v=function(e){return new Uint8Array(e)},m=function(e){return new Uint16Array(e)},g=function(e){return new Uint32Array(e)},y=function(e,t){var n=new e.constructor(t);return n.set(e),n},b=function(e,t){var n;switch(t){case 16:n=m(e.length);break;case 32:n=g(e.length);break;default:throw new Error("invalid array width!")}return n.set(e),n}),e.crossfilter=M;var H=M.reduceops={};H.version="0.0.1";var B=e._;!B&&typeof require!="undefined"&&(B=require("underscore")),H.sum=J,H.count=G,H.average=K,H.extents=Q,H.finalize=j,H.compose=Y,H.by=Z})(this);